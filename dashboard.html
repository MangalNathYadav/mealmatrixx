<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MealMatrix - Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">   
    <link rel="stylesheet" href="assets/css/new-styles.css">
    <link rel="stylesheet" href="assets/css/new-goals.css">
    <link rel="stylesheet" href="assets/css/ai-tips-separator.css">
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js" defer></script>
    <script src="firebase-config.js" defer></script>
    <script src="assets/js/auth.js" type="module" defer></script>
    <script type="module" src="assets/js/dashboard.js"></script>
    <style>
        :root {
            --primary-color: #9333EA;
            --secondary-color: #C084FC;
            --accent-color: #E879F9;
            --text-color: #1E293B;
            --bg-subtle: #F8FAFC;
            --white: #FFFFFF;
            --shadow-sm: 0 1px 2px rgba(147, 51, 234, 0.05);
            --shadow-md: 0 4px 6px rgba(147, 51, 234, 0.1);
            --transition: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --border-radius: 12px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --gradient-start: rgba(192, 132, 252, 0.2);
            --gradient-end: rgba(232, 121, 249, 0.15);
        }

        body {
            margin: 0;
            font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end)),
                        linear-gradient(135deg, var(--primary-color), var(--accent-color));
            background-attachment: fixed;
            color: var(--text-color);
            height: auto;
            min-height: 100%;
        }

        /* Dashboard Container with Glassmorphism */
        .dashboard-container {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: 1px solid rgba(255, 255, 255, 0.3);
            overflow: hidden;
            position: relative;
            margin: 2rem auto;
            padding: 2rem;
            animation: fadeSlideUp 0.8s ease-out;
        }

        .dashboard-container::before,
        .dashboard-container::after {
            content: '';
            position: absolute;
            width: 130%;
            height: 130%;
            top: 0%;
            left: 0%;
            z-index: -1;
            background: linear-gradient(180deg, 
                rgba(146, 51, 234, 0.28),
                rgba(192, 132, 252, 2.25),
                rgba(232, 121, 249, 0.13)
            );
            animation: fluidRotate 15s linear infinite;
            filter: blur(8px);
        }

        .dashboard-container::after {
            background: linear-gradient(90deg, 
                rgba(232, 121, 249, 0.20),
                rgba(147, 51, 234, 2.20),
                rgba(192, 132, 252, 0.10)
            );
            animation: fluidRotate 12s linear infinite reverse;
        }

        /* Dashboard Loading Overlay */
        #app-loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(146, 51, 234, 0.12);
            backdrop-filter: blur(12px);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s cubic-bezier(0.4,0,0.2,1);
        }

        #app-loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .dashboard-loading-card {
            background: rgba(255,255,255,0.18);
            border-radius: 18px;
            box-shadow: 0 8px 32px rgba(147, 51, 234, 0.12), 0 2px 10px rgba(255,255,255,0.08);
            border: 1.5px solid rgba(255,255,255,0.35);
            padding: 2.5rem 3.5rem;
            min-width: 340px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .dashboard-loading-title {
            font-size: 1.35rem;
            font-weight: 600;
            color: #9333EA;
            margin-bottom: 0.5rem;
            letter-spacing: 0.01em;
        }

        .dashboard-loading-subtext {
            color: #6D28D9;
            font-size: 1.05rem;
            opacity: 0.85;
            margin-bottom: 0.5rem;
        }

        /* Welcome Section with Glassmorphism */
        .welcome-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 2rem;
            /* margin-bottom: 2rem; */
            position: relative;
            overflow: hidden;
        }

        .welcome-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                rgba(147, 51, 234, 0.15),
                rgba(232, 121, 249, 0.1),
                rgba(192, 132, 252, 0.15)
            );
            animation: fluidMove 15s ease-in-out infinite;
            filter: blur(10px);
            opacity: 0.5;
        }

        /* Goals Grid with Glassmorphism */
        .goal-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 1.5rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .goal-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(147, 51, 234, 0.15);
        }

        /* Stat Cards with Glassmorphism */
        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 1.25rem 2rem;
            transition: all var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(147, 51, 234, 0.15);
        }

        /* Animations */
        @keyframes fadeSlideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fluidRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fluidMove {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.02); }
        }

        /* Add Button Enhancement */
        .add-button {
            background: rgba(147, 51, 234, 0.9);
            backdrop-filter: blur(8px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(147, 51, 234, 0.25);
            transition: all 0.3s ease;
        }

        .add-button:hover {
            transform: translateY(-4px) scale(1.1);
            background: rgba(147, 51, 234, 1);
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 12px 36px rgba(147, 51, 234, 0.35);
        }

        /* Navbar Enhancement */
        .navbar {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .btn {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .btn-primary {
            background: rgba(147, 51, 234, 0.8);
            color: white;
        }

        .btn-primary:hover {
            background: rgba(147, 51, 234, 1);
        }

        /* Dashboard Glassmorphism Loading Overlay */
        #app-loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(146, 51, 234, 0.12);
            backdrop-filter: blur(12px);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s cubic-bezier(0.4,0,0.2,1);
        }
        #app-loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .dashboard-loading-card {
            background: rgba(255,255,255,0.18);
            border-radius: 18px;
            box-shadow: 0 8px 32px rgba(147, 51, 234, 0.12), 0 2px 10px rgba(255,255,255,0.08);
            border: 1.5px solid rgba(255,255,255,0.35);
            padding: 2.5rem 3.5rem;
            min-width: 340px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        .dashboard-loading-card::before,
        .dashboard-loading-card::after {
            content: '';
            position: absolute;
            width: 180%;
            height: 180%;
            top: -25%;
            left: -25%;
            z-index: -1;
            background: linear-gradient(90deg, 
                rgba(146, 51, 234, 0.98),
                rgba(192, 132, 252, 0.50),
                rgba(232, 121, 249, 0.13)
            );
            animation: fluidRotate 10s linear infinite;
            /* filter: blur(8px); */
        }
        .dashboard-loading-card::after {
            background: linear-gradient(90deg, 
                rgba(232, 121, 249, 0.90),
                rgba(147, 51, 234, 0.50),
                rgba(192, 132, 252, 0.10)
            );
            animation: fluidRotate 7s linear infinite reverse;
        }
        .dashboard-loading-spinner {
            width: 56px;
            height: 56px;
            border: 4px solid rgba(147, 51, 234, 0.18);
            border-top: 4px solid #9333EA;
            border-radius: 50%;
            animation: spin 1.1s cubic-bezier(0.4,0,0.2,1) infinite;
            margin-bottom: 1.5rem;
            background: transparent;
        }
        .dashboard-loading-title {
            font-size: 1.35rem;
            font-weight: 600;
            color: #9333EA;
            margin-bottom: 0.5rem;
            letter-spacing: 0.01em;
        }
        .dashboard-loading-subtext {
            color: #6D28D9;
            font-size: 1.05rem;
            opacity: 0.85;
            margin-bottom: 0.5rem;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        @keyframes fluidRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>    <!-- Loading Overlay -->
    <div id="app-loading-overlay">
        <div class="dashboard-loading-card">
            <div class="dashboard-loading-spinner"></div>
            <div class="dashboard-loading-title">Loading MealMatrix</div>
            <div class="dashboard-loading-subtext">Please wait while we prepare your dashboard...</div>
        </div>
    </div>

    <!-- Main Navigation -->
    <nav class="navbar">
        <div class="container navbar-container">
            <a href="dashboard.html" class="navbar-logo">
                <img src="assets/mealmatrixx_logo.png" alt="MealMatrix Logo">
                MealMatrix
            </a>
            <div class="navbar-actions">
                <a href="nutrition-goals.html" class="btn btn-primary">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M8 1.5L14 5.5V10.5L8 14.5L2 10.5V5.5L8 1.5Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
                        <path d="M8 7.5L8 14.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M14 5.5L8 7.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M2 5.5L8 7.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    My Goals
                </a>
                <button id="weeklySummaryBtn" class="btn btn-secondary">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M2 13.5H14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M4 13.5V7.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M8 13.5V3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M12 13.5V5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    Weekly Summary
                    <div class="ai-spinner"></div>
                </button>
                <a href="profile.html" class="btn btn-outline">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M8 8C9.65685 8 11 6.65685 11 5C11 3.34315 9.65685 2 8 2C6.34315 2 5 3.34315 5 5C5 6.65685 6.34315 8 8 8Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M13 14C13 11.7909 10.7614 10 8 10C5.23858 10 3 11.7909 3 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Profile
                </a>
                <button id="logoutBtn" class="btn btn-outline">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M6 14H3.33333C2.97971 14 2.64057 13.8595 2.39052 13.6095C2.14048 13.3594 2 13.0203 2 12.6667V3.33333C2 2.97971 2.14048 2.64057 2.39052 2.39052C2.64057 2.14048 2.97971 2 3.33333 2H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M10.6667 11.3333L14 8L10.6667 4.66667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M14 8H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Logout
                </button>
            </div>
        </div>    </nav>

    <main>
        <!-- Welcome Section -->
        <section class="welcome-section">
            <div class="container">
            <div class="welcome-content">
                <div class="welcome-user">
                    <img src="assets/mealmatrixx_logo.png" alt="Profile Photo" class="welcome-avatar" id="welcomeProfilePhoto">
                    <div class="welcome-text">
                        <h1>Welcome back, <span id="welcomeName">there</span> 👋</h1>
                        <p>Here's your meal tracking overview for today</p>
                    </div>
                </div>
                <div class="welcome-stats">
                    <div class="stat-card">
                        <span class="stat-icon">📊</span>
                        <div class="stat-text">
                            <span class="stat-value" id="todayMealsCount">0</span>
                            <span class="stat-label">meals logged today</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">✨</span>
                        <div class="stat-text">
                            <span class="stat-value" id="streakCount">0</span>
                            <span class="stat-label">day streak</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Goals Grid -->
            <div class="goals-grid">
                <!-- Daily Calorie Goals -->
                <div class="goal-card">
                    <div class="goal-card-header">
                        <div class="goal-icon">🔥</div>
                        <h3 class="goal-title">Daily Calories</h3>
                    </div>
                    <div class="goal-content">
                        <div class="goal-target">
                            <span class="goal-target-label">Target</span>
                            <span class="goal-target-value">5000 kcal</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 22%"></div>
                        </div>
                        <div class="goal-stats">
                            <span>1087 kcal consumed</span>
                            <span>22%</span>
                        </div>
                    </div>
                </div>

                <!-- Protein Goals -->
                <div class="goal-card">
                    <div class="goal-card-header">
                        <div class="goal-icon">🥩</div>
                        <h3 class="goal-title">Protein</h3>
                    </div>
                    <div class="goal-content">
                        <div class="goal-target">
                            <span class="goal-target-label">Target</span>
                            <span class="goal-target-value">200g</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 8%"></div>
                        </div>
                        <div class="goal-stats">
                            <span>16.8g consumed</span>
                            <span>8%</span>
                        </div>
                    </div>
                </div>

                <!-- Carbs Goals -->
                <div class="goal-card">
                    <div class="goal-card-header">
                        <div class="goal-icon">🌾</div>
                        <h3 class="goal-title">Carbs</h3>
                    </div>
                    <div class="goal-content">
                        <div class="goal-target">
                            <span class="goal-target-label">Target</span>
                            <span class="goal-target-value">250g</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 38%"></div>
                        </div>
                        <div class="goal-stats">
                            <span>95.5g consumed</span>
                            <span>38%</span>
                        </div>
                    </div>
                </div>

                <!-- Fat Goals -->
                <div class="goal-card">
                    <div class="goal-card-header">
                        <div class="goal-icon">🥑</div>
                        <h3 class="goal-title">Fat</h3>
                    </div>
                    <div class="goal-content">
                        <div class="goal-target">
                            <span class="goal-target-label">Target</span>
                            <span class="goal-target-value">70g</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 15%"></div>
                        </div>
                        <div class="goal-stats">
                            <span>10.5g consumed</span>
                            <span>15%</span>
                        </div>
                    </div>
                </div>            </div>

            <!-- Dashboard with Sidebar and Main Content -->
            <div class="dashboard-container">
                <!-- Left Sidebar -->
                <aside class="dashboard-sidebar">
                    <!-- Daily Calorie Goals Section -->
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">Daily Calorie Goals</h3>
                        <div class="goal-item">
                            <div class="goal-header">
                                <span class="goal-label">Target Daily Calories</span>
                                <span class="goal-value">5000 kcal</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 45%"></div>
                            </div>
                            <div class="goal-stats">
                                <span>2250 kcal consumed</span>
                                <span>45%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Macro Goals Section -->
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">Macro Goals</h3>
                        <div class="goal-item">
                            <div class="goal-header">
                                <span class="goal-label">Protein</span>
                                <span class="goal-value">200g</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 35%"></div>
                            </div>
                            <div class="goal-stats">
                                <span>70g consumed</span>
                                <span>35%</span>
                            </div>
                        </div>
                        <div class="goal-item">
                            <div class="goal-header">
                                <span class="goal-label">Carbs</span>
                                <span class="goal-value">250g</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 40%"></div>
                            </div>
                            <div class="goal-stats">
                                <span>100g consumed</span>
                                <span>40%</span>
                            </div>
                        </div>
                        <div class="goal-item">
                            <div class="goal-header">
                                <span class="goal-label">Fat</span>
                                <span class="goal-value">55g</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 50%"></div>
                            </div>
                            <div class="goal-stats">
                                <span>27.5g consumed</span>
                                <span>50%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Health Goals Section -->
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">Health Goals</h3>
                        <div class="goal-item">
                            <div class="goal-header">
                                <span class="goal-label">Target Weight</span>
                                <span class="goal-value">56 kg</span>
                            </div>
                            <div class="goal-stats">
                                <span>Gain Muscle Mass</span>
                            </div>
                        </div>
                        <div class="goal-item">
                            <div class="goal-header">
                                <span class="goal-label">Weekly Goal</span>
                                <span class="goal-value">+0.2 kg</span>
                            </div>
                            <div class="goal-stats">
                                <span>Healthy weight gain pace</span>
                            </div>
                        </div>
                    </div>                    <!-- AI Nutrition Tips Section -->
                    <div class="sidebar-section ai-tips-section">
                        <h3 class="sidebar-title">
                            <span>AI Nutrition Tips</span>
                            <div class="ai-badge">AI</div>
                        </h3>
                        <div class="ai-tips-content">
                            <div class="ai-tip-card">
                                <div class="ai-tip-icon check">✓</div>
                                <p>You've reached 50% of your healthy fats goal. Avocados or nuts would be a great addition today.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Additional AI Nutrition Tips -->
                    <div class="sidebar-section ai-tips-section">
                        <h3 class="sidebar-title">
                            <span>Protein Suggestion</span>
                            <div class="ai-badge">AI</div>
                        </h3>
                        <div class="ai-tips-content">
                            <div class="ai-tip-card">
                                <div class="ai-tip-icon protein">🥩</div>
                                <p>Based on your protein intake, consider adding more lean protein sources to your next meal.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Hydration AI Tip -->
                    <div class="sidebar-section ai-tips-section">
                        <h3 class="sidebar-title">
                            <span>Hydration Reminder</span>
                            <div class="ai-badge">AI</div>
                        </h3>
                        <div class="ai-tips-content">
                            <div class="ai-tip-card">
                                <div class="ai-tip-icon hydration">💧</div>
                                <p>Remember to stay hydrated. You've only had 3 glasses of water today, aim for 5 more.</p>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Main Content Area -->
                <div class="dashboard-main">
                    <!-- Today's Meals Section -->
                    <div class="section-header">
                        <h2>Today's Meals</h2>
                    </div>                    <div id="mealGrid" class="meals-container">
                        <!-- Empty state - will be replaced by actual meals when available -->
                        <div class="meal-card empty-meal-card">
                            <div class="empty-state">
                                <div class="empty-state-icon">🍽️</div>
                                <h3 class="empty-state-title">No meals added yet</h3>
                                <p class="empty-state-text">Click the + button to add your first meal</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Add Meal Button -->
    <a href="add-meal.html" class="add-button">+</a>

    <!-- Weekly Summary Modal -->
    <div id="weeklySummaryModal" class="modal-backdrop">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h3 class="modal-title">Weekly Nutrition Summary</h3>
                    <p class="modal-subtitle">Your nutrition insights for the past 7 days</p>
                </div>
                <button class="modal-close" onclick="closeWeeklySummary()" aria-label="Close">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <!-- Loading State -->
                <div class="modal-loading-state">
                    <div class="loading-spinner"></div>
                    <p>Analyzing your weekly nutrition data...</p>
                </div>

                <!-- Summary Content -->
                <div class="weekly-summary-content" style="display: none;">
                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">🔥</div>
                            <div class="stat-info">
                                <h4>Average Daily Calories</h4>
                                <div class="stat-value" id="avgCalories">-</div>
                                <div class="stat-trend positive">+5% from last week</div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">🥩</div>
                            <div class="stat-info">
                                <h4>Average Protein</h4>
                                <div class="stat-value" id="avgProtein">-</div>
                                <div class="stat-trend negative">-2% from last week</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">🏆</div>
                            <div class="stat-info">
                                <h4>Goal Achievement</h4>
                                <div class="stat-value" id="goalAchievement">-</div>
                                <div class="stat-trend positive">Great progress!</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">📊</div>
                            <div class="stat-info">
                                <h4>Meals Logged</h4>
                                <div class="stat-value" id="mealsLogged">-</div>
                                <div class="stat-trend">Total this week</div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Section -->
                    <div class="chart-section">
                        <div class="chart-header">
                            <h4>Daily Nutrition Overview</h4>
                            <div class="chart-legend">
                                <span class="legend-item">
                                    <span class="legend-color" style="background: var(--primary-color)"></span>
                                    Calories
                                </span>
                                <span class="legend-item">
                                    <span class="legend-color" style="background: var(--secondary-color)"></span>
                                    Protein
                                </span>
                            </div>
                        </div>
                        <div class="chart-container" id="weeklyChart">
                            <!-- Chart will be rendered here -->
                        </div>
                    </div>

                    <!-- AI Insights Section -->
                    <div class="insights-section">
                        <h4>
                            <span class="ai-badge">AI</span>
                            Nutrition Insights
                        </h4>
                        <div class="insights-grid" id="aiInsights">
                            <!-- Insights will be dynamically added here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        :root {
            /* Colors */
            --primary-color: #6366F1;
            --secondary-color: #8B5CF6;
            --text-color: #1E293B;
            --text-muted: #64748B;
            --border-color: #E2E8F0;
            --bg-subtle: #F3F4F6;
        }

        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
        }

        .modal-backdrop.visible {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.95) translateY(20px);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .modal-backdrop.visible .modal {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        .modal-loading-state {
            text-align: center;
            padding: 4rem 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-color);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
            animation: fadeSlideUp 0.5s ease;
        }

        .stat-card {
            background: var(--bg-subtle);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            display: inline-block;
            transition: transform 0.3s ease;
        }

        .stat-card:hover .stat-icon {
            transform: scale(1.1);
        }

        .stat-info h4 {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin: 0 0 0.5rem 0;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-color);
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .chart-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: white;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .insights-section {
            margin-top: 2rem;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            animation: fadeSlideUp 0.5s ease 0.2s both;
        }

        .insight-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .insight-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border-color: var(--primary-color);
        }

        /* No Goals Message Styles */
        .no-goal-message {
            text-align: center;
            padding: 2rem 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .no-goal-text {
            color: var(--text-muted);
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
        }

        .no-goal-message .btn {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            border-radius: 0.5rem;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            transition: all 0.2s;
        }

        .no-goal-message .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .goal-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .goal-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Dashboard Layout Adjustments */
        .dashboard-container {
            display: flex;
            gap: 2rem;
            transition: all 0.3s ease;
        }

        .dashboard-sidebar {
            width: 300px;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .dashboard-sidebar[style*="display: none"] + .dashboard-main {
            width: 100%;
            max-width: 100%;
        }

        .dashboard-main {
            flex: 1;
            transition: all 0.3s ease;
        }

        @keyframes fadeSlideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modal-header {
                flex-direction: column;
                gap: 1rem;
            }

            .modal-close {
                position: absolute;
                top: 1rem;
                right: 1rem;
            }

            .chart-header {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>

    <script>
        let currentSummaryData = null;

        function closeWeeklySummary() {
            const modal = document.getElementById('weeklySummaryModal');
            modal.classList.remove('visible');
        }

        document.getElementById('weeklySummaryBtn').addEventListener('click', async function() {
            const modal = document.getElementById('weeklySummaryModal');
            modal.classList.add('visible');
            
            // Show loading state with animation
            document.querySelector('.modal-loading-state').style.display = 'flex';
            document.querySelector('.weekly-summary-content').style.display = 'none';
            
            // Load data
            await loadWeeklySummaryData();
        });

        async function loadWeeklySummaryData() {
            try {
                const loadingState = document.querySelector('.modal-loading-state');
                const content = document.querySelector('.weekly-summary-content');
                
                // Simulate data loading delay (remove this in production)
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Update UI with data
                loadingState.style.display = 'none';
                content.style.display = 'block';
                
                // Animate content in
                requestAnimationFrame(() => {
                    content.style.opacity = '0';
                    content.style.transform = 'translateY(20px)';
                    
                    requestAnimationFrame(() => {
                        content.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
                        content.style.opacity = '1';
                        content.style.transform = 'translateY(0)';
                    });
                });
                
                // TODO: Implement actual data loading from Firebase
                updateWeeklySummaryUI({
                    avgCalories: '2,150',
                    avgProtein: '85g',
                    goalAchievement: '92%',
                    mealsLogged: '21'
                });
            } catch (error) {
                console.error('Error loading weekly summary:', error);
                showToast('Failed to load weekly summary', 'error');
            }
        }

        function updateWeeklySummaryUI(data) {
            currentSummaryData = data;
            
            // Update stats with animations
            const stats = {
                'avgCalories': data.avgCalories,
                'avgProtein': data.avgProtein,
                'goalAchievement': data.goalAchievement,
                'mealsLogged': data.mealsLogged
            };
            
            Object.entries(stats).forEach(([id, value], index) => {
                const element = document.getElementById(id);
                if (element) {
                    setTimeout(() => {
                        element.style.transform = 'translateY(-10px)';
                        element.style.opacity = '0';
                        
                        setTimeout(() => {
                            element.textContent = value;
                            element.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
                            element.style.transform = 'translateY(0)';
                            element.style.opacity = '1';
                        }, 100);
                    }, index * 100);
                }
            });
            
            // Animate progress bars
            document.querySelectorAll('.progress-bar').forEach((bar, index) => {
                setTimeout(() => {
                    const fill = bar.querySelector('.progress-fill');
                    if (fill) {
                        fill.style.transition = 'width 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                        fill.style.width = fill.getAttribute('data-target') + '%';
                    }
                }, (index + 4) * 100); // Start after stats animations
            });
        }

        // AI assessment function is now handled in dashboard.js
    </script>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="assets/mealmatrixx_logo.png" alt="MealMatrix Logo">
                    <div class="footer-logo-text">
                        <h3>MealMatrix</h3>
                        <p>Smart Nutrition Tracking</p>
                    </div>
                </div>
                <div class="footer-links">
                    <div class="footer-links-column">
                        <h4>Navigate</h4>
                        <ul>
                            <li><a href="dashboard.html">Dashboard</a></li>
                            <li><a href="add-meal.html">Add Meal</a></li>
                            <li><a href="nutrition-goals.html">Nutrition Goals</a></li>
                            <li><a href="profile.html">Profile</a></li>
                        </ul>
                    </div>
                    <div class="footer-links-column">
                        <h4>Resources</h4>
                        <ul>
                            <li><a href="advanced-features.html">AI Features</a></li>
                            <li><a href="#">Nutrition Guide</a></li>
                            <li><a href="#">Calorie Calculator</a></li>
                            <li><a href="#">Meal Planning</a></li>
                        </ul>
                    </div>
                    <div class="footer-links-column">
                        <h4>Company</h4>
                        <ul>
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Terms of Service</a></li>
                            <li><a href="#">Contact</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; <span id="copyright-year">2023</span> MealMatrix. All rights reserved.</p>
                <div class="footer-social">
                    <a href="#" aria-label="Facebook"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M18 2H15C13.6739 2 12.4021 2.52678 11.4645 3.46447C10.5268 4.40215 10 5.67392 10 7V10H7V14H10V22H14V14H17L18 10H14V7C14 6.73478 14.1054 6.48043 14.2929 6.29289C14.4804 6.10536 14.7348 6 15 6H18V2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></a>
                    <a href="#" aria-label="Twitter"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M22 4.01C21 4.5 20.02 4.69 19 4.82C20.05 4.27 20.82 3.27 21.2 2.1C20.22 2.68 19.14 3.1 18 3.28C17.25 2.38 16.18 1.9 15 1.9C12.79 1.9 11 3.69 11 5.9C11 6.22 11.03 6.52 11.09 6.8C7.99 6.63 5.22 5.1 3.39 2.68C3.05 3.3 2.85 4.02 2.85 4.77C2.85 6.22 3.59 7.5 4.68 8.2C3.99 8.2 3.35 8.02 2.8 7.7V7.74C2.8 9.73 4.15 11.43 6 11.8C5.68 11.9 5.34 11.95 5 11.95C4.75 11.95 4.5 11.93 4.25 11.9C4.75 13.5 6.25 14.7 8 14.73C6.6 15.8 4.8 16.43 2.9 16.43C2.6 16.43 2.3 16.41 2 16.37C3.77 17.53 5.85 18.17 8.05 18.17C15 18.17 18.84 12.5 18.84 7.58C18.84 7.4 18.84 7.22 18.83 7.04C19.82 6.42 20.68 5.61 21.39 4.68C20.5 5.01 19.57 5.24 18.6 5.34C19.63 4.76 20.37 3.8 20.74 2.68C19.8 3.22 18.75 3.62 17.67 3.82C16.65 2.82 15.23 2.2 13.67 2.2C10.68 2.2 8.26 4.62 8.26 7.61C8.26 7.93 8.29 8.24 8.36 8.53C3.9 8.36 0 6.1 0 2.2C0 1.6 0.12 1.03 0.33 0.5C1.25 2.12 3.01 3.25 5.02 3.47C3.63 3.24 2.38 2.61 1.41 1.7C1.7 3.71 3.47 5.25 5.62 5.45C4.04 5.75 2.42 5.44 1.06 4.6C1.65 6.43 3.37 7.76 5.41 7.78C3.15 8.3 0.7 7.68 0 6.4C1.25 8.18 3.47 9.3 5.92 9.3C12.74 9.3 16.28 3.3 16.06 0C17.28 0.7 18.33 1.7 19.13 2.85" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></a>
                    <a href="#" aria-label="Instagram"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><rect x="2" y="2" width="20" height="20" rx="5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 11.37C16.1234 12.2022 15.9813 13.0522 15.5938 13.799C15.2063 14.5458 14.5931 15.1514 13.8416 15.5297C13.0901 15.9079 12.2384 16.0396 11.4078 15.9059C10.5771 15.7723 9.80976 15.3801 9.21484 14.7852C8.61991 14.1902 8.22773 13.4229 8.09406 12.5922C7.9604 11.7615 8.09206 10.9099 8.47032 10.1584C8.84858 9.40685 9.45418 8.79374 10.201 8.40624C10.9478 8.01874 11.7978 7.87659 12.63 8C13.4789 8.12588 14.2648 8.52146 14.8717 9.12831C15.4785 9.73515 15.8741 10.5211 16 11.37Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="16.5" cy="7.5" r="1.5" fill="currentColor"/></svg></a>
                    <a href="#" aria-label="LinkedIn"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M16 8C17.5913 8 19.1174 8.63214 20.2426 9.75736C21.3679 10.8826 22 12.4087 22 14V21H18V14C18 13.4696 17.7893 12.9609 17.4142 12.5858C17.0391 12.2107 16.5304 12 16 12C15.4696 12 14.9609 12.2107 14.5858 12.5858C14.2107 12.9609 14 13.4696 14 14V21H10V14C10 12.4087 10.6321 10.8826 11.7574 9.75736C12.8826 8.63214 14.4087 8 16 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 9H2V21H6V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M4 6C5.10457 6 6 5.10457 6 4C6 2.89543 5.10457 2 4 2C2.89543 2 2 2.89543 2 4C2 5.10457 2.89543 6 4 6Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
                </div>
            </div>
        </div>
    </footer>
      <script>
        // Update copyright year
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('copyright-year').textContent = new Date().getFullYear();
        });
    </script>
</body>
</html>
