(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{9503:(e,a,t)=>{"use strict";t.d(a,{k:()=>s});var r=t(95155);function s(){return(0,r.jsx)("div",{className:"flex h-[50vh] w-full items-center justify-center",children:(0,r.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})}},30285:()=>{},44879:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>N});var r=t(95155),s=t(12115),l=t(76408),i=t(66695),n=t(9503),d=t(30285),o=t(59576),c=t(56104),u=t(81115),x=t(83540),h=t(56965),m=t(94754),f=t(96025),p=t(16238),j=t(94517),y=t(21374),v=t(6874),g=t.n(v);function N(){let{user:e}=(0,o.A)(),[a,t]=(0,s.useState)(!0),[v,N]=(0,s.useState)({totalMeals:0,totalCalories:0,avgCalories:0}),[b,w]=(0,s.useState)([]);return((0,s.useEffect)(()=>{if(!e)return;let a=(0,u.KR)(c.mH,"users/".concat(e.uid,"/meals")),r=(0,u.Zy)(a,e=>{let a=e.val();if(!a){N({totalMeals:0,totalCalories:0,avgCalories:0}),w([]),t(!1);return}let r=Object.values(a);r.sort((e,a)=>e.date-a.date);let s=r.length,l=r.reduce((e,a)=>e+a.calories,0),i=Math.round(l/s);N({totalMeals:s,totalCalories:l,avgCalories:i}),w(Array(7).fill(0).map((e,a)=>{let t=new Date;return t.setDate(t.getDate()-(6-a)),t.toISOString().split("T")[0]}).map(e=>{let a=r.filter(a=>new Date(a.date).toISOString().split("T")[0]===e);return{date:new Date(e).toLocaleDateString("en-US",{weekday:"short"}),calories:a.reduce((e,a)=>e+a.calories,0)}})),t(!1)});return()=>r()},[e]),a)?(0,r.jsx)(n.k,{}):(0,r.jsxs)("div",{className:"container py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("h1",{className:"text-4xl font-bold",children:["Welcome, ",(null==e?void 0:e.displayName)||"User","!"]}),(0,r.jsx)(d.Button,{asChild:!0,children:(0,r.jsx)(g(),{href:"/dashboard/meals/new",children:"Log a Meal"})})]}),(0,r.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 mb-8",children:[(0,r.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{children:"Total Meals"})}),(0,r.jsx)(i.Wu,{children:(0,r.jsx)("p",{className:"text-3xl font-bold",children:v.totalMeals})})]})}),(0,r.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{children:"Total Calories"})}),(0,r.jsx)(i.Wu,{children:(0,r.jsx)("p",{className:"text-3xl font-bold",children:v.totalCalories})})]})}),(0,r.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{children:"Average Calories/Meal"})}),(0,r.jsx)(i.Wu,{children:(0,r.jsx)("p",{className:"text-3xl font-bold",children:v.avgCalories})})]})})]}),(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"w-full aspect-[2/1] bg-background rounded-lg border p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Calories Over Time"}),(0,r.jsx)(x.u,{width:"100%",height:"100%",children:(0,r.jsxs)(h.b,{data:b,children:[(0,r.jsx)(m.d,{strokeDasharray:"3 3"}),(0,r.jsx)(f.W,{dataKey:"date"}),(0,r.jsx)(p.h,{}),(0,r.jsx)(j.m,{}),(0,r.jsx)(y.N,{type:"monotone",dataKey:"calories",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{r:4},activeDot:{r:8}})]})})]})]})}},50680:(e,a,t)=>{Promise.resolve().then(t.bind(t,44879))},56104:(e,a,t)=>{"use strict";t.d(a,{e7:()=>n,mH:()=>d});var r=t(23915),s=t(16203),l=t(81115);let i=0===(0,r.Dk)().length?(0,r.Wp)({apiKey:"AIzaSyDJRYvkh4ejfXHiYvTYcrcTMjA8awrnZzQ",authDomain:"mealmatrix-ac32a.firebaseapp.com",projectId:"mealmatrix-ac32a",messagingSenderId:"347054902442",appId:"1:347054902442:web:c83ed92e399e3f19c414d3",databaseURL:"https://mealmatrix-ac32a-default-rtdb.firebaseio.com"}):(0,r.Dk)()[0],n=(0,s.xI)(i),d=(0,l.C3)(i)},59434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>l});var r=t(52596),s=t(39688);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}},59576:(e,a,t)=>{"use strict";t.d(a,{A:()=>o,AuthProvider:()=>d});var r=t(95155),s=t(12115),l=t(16203),i=t(56104);let n=(0,s.createContext)({});function d(e){let{children:a}=e,[t,d]=(0,s.useState)(null),[o,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=i.e7.onAuthStateChanged(e=>{d(e),c(!1)});return()=>e()},[]);let u=async(e,a)=>(await (0,l.x9)(i.e7,e,a)).user,x=async(e,a,t)=>{let r=await (0,l.eJ)(i.e7,e,a);return await (0,l.r7)(r.user,{displayName:t}),r.user},h=async()=>{await (0,l.CI)(i.e7)},m=async(e,a)=>{if(!t)throw Error("No user logged in");await (0,l.r7)(t,{displayName:e,photoURL:a})};return(0,r.jsx)(n.Provider,{value:{user:t,loading:o,signIn:u,signUp:x,signOut:h,updateUserProfile:m},children:a})}let o=()=>{let e=(0,s.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},66695:(e,a,t)=>{"use strict";t.d(a,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>n,wL:()=>u});var r=t(95155),s=t(12115),l=t(59434);let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});i.displayName="Card";let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...s})});n.displayName="CardHeader";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent";let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"}},e=>{var a=a=>e(e.s=a);e.O(0,[507,965,463,277,874,408,605,441,684,358],()=>a(50680)),_N_E=e.O()}]);