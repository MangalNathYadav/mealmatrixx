(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{20596:(e,t,a)=>{"use strict";a.d(t,{oR:()=>c});let s=0,r=new Map,l=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function o(e){d=n(d,e),i.forEach(e=>{e(d)})}function c(e){let{...t}=e,a=(s=(s+1)%Number.MAX_VALUE).toString(),r=()=>o({type:"DISMISS_TOAST",toastId:a});return o({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:a}})}}},30285:()=>{},32884:(e,t,a)=>{Promise.resolve().then(a.bind(a,78772))},33356:(e,t,a)=>{"use strict";function s(e){return e instanceof Error||(null==e?void 0:e.code)||(null==e?void 0:e.message)||(null==e?void 0:e.message)?{message:e.message}:{message:"An unexpected error occurred"}}a.d(t,{H:()=>s})},54165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>m,Es:()=>x,L3:()=>p,c7:()=>f,lG:()=>d,rr:()=>h,zM:()=>o});var s=a(95155),r=a(12115),l=a(15452),n=a(54416),i=a(59434);let d=l.bL,o=l.l9,c=l.ZL;l.bm;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});u.displayName=l.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(l.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[r,(0,s.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.UC.displayName;let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};f.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});p.displayName=l.hE.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});h.displayName=l.VY.displayName},56104:(e,t,a)=>{"use strict";a.d(t,{e7:()=>i,mH:()=>d});var s=a(23915),r=a(16203),l=a(81115);let n=0===(0,s.Dk)().length?(0,s.Wp)({apiKey:"AIzaSyDJRYvkh4ejfXHiYvTYcrcTMjA8awrnZzQ",authDomain:"mealmatrix-ac32a.firebaseapp.com",projectId:"mealmatrix-ac32a",messagingSenderId:"347054902442",appId:"1:347054902442:web:c83ed92e399e3f19c414d3",databaseURL:"https://mealmatrix-ac32a-default-rtdb.firebaseio.com"}):(0,s.Dk)()[0],i=(0,r.xI)(n),d=(0,l.C3)(n)},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(52596),r=a(39688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},59576:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,AuthProvider:()=>d});var s=a(95155),r=a(12115),l=a(16203),n=a(56104);let i=(0,r.createContext)({});function d(e){let{children:t}=e,[a,d]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=n.e7.onAuthStateChanged(e=>{d(e),c(!1)});return()=>e()},[]);let u=async(e,t)=>(await (0,l.x9)(n.e7,e,t)).user,m=async(e,t,a)=>{let s=await (0,l.eJ)(n.e7,e,t);return await (0,l.r7)(s.user,{displayName:a}),s.user},f=async()=>{await (0,l.CI)(n.e7)},x=async(e,t)=>{if(!a)throw Error("No user logged in");await (0,l.r7)(a,{displayName:e,photoURL:t})};return(0,s.jsx)(i.Provider,{value:{user:a,loading:o,signIn:u,signUp:m,signOut:f,updateUserProfile:x},children:t})}let o=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>i,wL:()=>u});var s=a(95155),r=a(12115),l=a(59434);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},78772:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(95155),r=a(12115),l=a(6874),n=a.n(l),i=a(60760),d=a(76408),o=a(81115),c=a(56104),u=a(59576),m=a(30285),f=a(33356),x=a(66695),p=a(54165),h=a(20596);function g(){let{user:e}=(0,u.A)(),[t,a]=(0,r.useState)([]),[l,g]=(0,r.useState)(!0),[j,y]=(0,r.useState)(null),[N,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!e)return;let t=(0,o.KR)(c.mH,"users/".concat(e.uid,"/meals")),s=(0,o.Zy)(t,e=>{let t=e.val();if(!t){a([]),g(!1);return}let s=Object.entries(t).map(e=>{let[t,a]=e;return{id:t,...a}});s.sort((e,t)=>t.date-e.date),a(s),g(!1)});return()=>s()},[e]);let b=async t=>{if(e)try{await (0,o.TF)((0,o.KR)(c.mH,"users/".concat(e.uid,"/meals/").concat(t.id))),(0,h.oR)({title:"Success",description:"Meal deleted successfully"})}catch(t){let{message:e}=(0,f.H)(t);(0,h.oR)({title:"Error",description:e,variant:"destructive"})}};return l?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsxs)("div",{className:"container py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"Your Meals"}),(0,s.jsx)(m.Button,{asChild:!0,children:(0,s.jsx)(n(),{href:"/dashboard/meals/new",children:"Log a New Meal"})})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,s.jsx)(i.N,{children:t.map(e=>(0,s.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},layout:!0,children:(0,s.jsxs)(x.Zp,{children:[(0,s.jsxs)(x.aR,{children:[(0,s.jsx)(x.ZB,{children:e.title}),(0,s.jsx)(x.BT,{children:new Date(e.date).toLocaleDateString()})]}),(0,s.jsxs)(x.Wu,{children:[e.description&&(0,s.jsx)("p",{className:"mb-4 text-muted-foreground",children:e.description}),(0,s.jsxs)("p",{className:"text-lg font-semibold",children:[e.calories," calories"]})]}),(0,s.jsxs)(x.wL,{className:"flex justify-between",children:[(0,s.jsx)(m.Button,{variant:"outline",asChild:!0,children:(0,s.jsx)(n(),{href:"/dashboard/meals/".concat(e.id,"/edit"),children:"Edit"})}),(0,s.jsxs)(p.lG,{open:N&&(null==j?void 0:j.id)===e.id,onOpenChange:e=>{v(e),e||y(null)},children:[(0,s.jsx)(p.zM,{asChild:!0,children:(0,s.jsx)(m.Button,{variant:"destructive",onClick:()=>{y(e),v(!0)},children:"Delete"})}),(0,s.jsxs)(p.Cf,{children:[(0,s.jsxs)(p.c7,{children:[(0,s.jsx)(p.L3,{children:"Are you sure?"}),(0,s.jsx)(p.rr,{children:"This action cannot be undone. This will permanently delete your meal entry."})]}),(0,s.jsxs)(p.Es,{children:[(0,s.jsx)(m.Button,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),(0,s.jsx)(m.Button,{variant:"destructive",onClick:()=>{j&&(b(j),v(!1))},children:"Delete"})]})]})]})]})]})},e.id))}),0===t.length&&(0,s.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"No meals logged yet"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Start tracking your meals to see them here"}),(0,s.jsx)(m.Button,{asChild:!0,children:(0,s.jsx)(n(),{href:"/dashboard/meals/new",children:"Log Your First Meal"})})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[507,965,463,277,874,634,408,410,441,684,358],()=>t(32884)),_N_E=e.O()}]);